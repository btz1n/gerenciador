{% extends "base.html" %}
{% block content %}
<div class="card">
  <h3>Personalização</h3>
  <p class="muted">Disponível a partir do plano PRO. Aqui você escolhe tema, fundo e cores.</p>

  {% if ok %}
    <div class="toast ok">Salvo com sucesso.</div>
  {% endif %}
  {% if err %}
    <div class="toast err">{{ err }}</div>
  {% endif %}

  <form method="post" action="/personalizacao" class="form" enctype="multipart/form-data">
    <label>Tema</label>
    <select class="input" name="theme_mode">
      <option value="dark" {% if branding and branding.theme_mode=='dark' %}selected{% endif %}>Escuro (Dark)</option>
      <option value="light" {% if branding and branding.theme_mode=='light' %}selected{% endif %}>Claro (Light)</option>
      <option value="soft" {% if branding and branding.theme_mode=='soft' %}selected{% endif %}>Escuro Suave (Soft)</option>
    </select>

    <label>Fundo</label>
    <div class="grid3">
      <button class="chip" type="button" onclick="setBg('#0b0f14')">Dark Império</button>
      <button class="chip" type="button" onclick="setBg('#151922')">Dark Suave</button>
      <button class="chip" type="button" onclick="setBg('#f4f6f9')">Light Clean</button>
    </div>
    <input class="input" id="bg_color" type="color" name="bg_color" value="{{ branding.bg_color if branding and branding.bg_color else '#0b0f14' }}">

    <label>Cor primária (botões)</label>
    <input class="input" type="color" name="primary_color" value="{{ branding.primary_color if branding and branding.primary_color else '#2f6bff' }}">

    <label>Cor secundária</label>
    <input class="input" type="color" name="secondary_color" value="{{ branding.secondary_color if branding and branding.secondary_color else '#9a7bff' }}">

    <label>WhatsApp do suporte (opcional)</label>
    <input class="input" name="whatsapp_support" value="{{ branding.whatsapp_support if branding and branding.whatsapp_support else '' }}" placeholder="Ex: 22999480023">

    {% if features.get('white_label') %}
      <label>Nome do sistema (ELITE)</label>
      <input class="input" name="product_name" value="{{ branding.product_name if branding and branding.product_name else 'IMPÉRIO' }}">

      <label>Logo (ELITE)</label>
      <input class="input" type="file" name="logo_file" accept="image/*">
      <div class="muted" style="margin-top:6px;">Recomendado: PNG com fundo transparente.</div>
    {% endif %}

    <div style="height:10px"></div>
    <button class="btn primary" type="submit">Salvar</button>
  </form>
</div>

<script>
function setBg(hex){
  document.getElementById('bg_color').value = hex;
}
</script>
{% endblock %}
